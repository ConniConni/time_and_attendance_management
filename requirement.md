# 勤怠管理システム 要件定義書

## 1. プロジェクト概要

### 1.1 システム名
勤怠管理システム（Time and Attendance Management System）

### 1.2 システム目的
従業員の勤怠管理を効率化し、労働時間の適切な管理と法令遵守を実現する。

### 1.3 対象ユーザー
- 一般従業員：出退勤打刻、残業申請
- 管理者：部下の勤怠状況確認、承認業務
- 人事部：残業時間の承認、データ管理

---

## 2. 仮定一覧

本要件定義書では、以下の仮定に基づいて要件を補完しています。

| ID | 仮定内容 |
|---|---|---|
| ASM-001 | 打刻はGPS位置情報による認証を含む |
| ASM-002 | 勤務時間は9:00-18:00を基本とし、それ以外を残業とみなす |
| ASM-003 | 残業申請の承認者は直属の上司（管理者）とする |
| ASM-004 | 人事部の承認は45時間超過の月次残業に対してのみ必要 |
| ASM-005 | データ保持期間5年は労働基準法に基づく |
| ASM-006 | システムはWeb/モバイルアプリで提供される |
| ASM-007 | 打刻の修正は管理者承認が必要 |
| ASM-008 | 当日申請の残業は事後承認が可能 |
| ASM-009 | 月次の勤怠データは翌月5営業日までに確定する |
| ASM-010 | ユーザー認証は既存の社内認証システムと連携する |

---

## 3. 機能要件

### 3.1 打刻機能

#### REQ-001: スマートフォンによる出勤打刻
**優先度**: 高
**説明**: 従業員がスマートフォンから出勤時刻を打刻できる。
**詳細要件**:
- スマートフォンのブラウザまたは専用アプリから打刻可能
- 打刻時刻は秒単位で記録される
- GPS位置情報を取得し、打刻場所を記録する
- 打刻完了後、確認メッセージを表示する

#### REQ-002: スマートフォンによる退勤打刻
**優先度**: 高
**説明**: 従業員がスマートフォンから退勤時刻を打刻できる。
**詳細要件**:
- REQ-001と同様の仕様
- 退勤打刻時に当日の勤務時間を表示する
- 残業が発生する場合は警告メッセージを表示する

#### REQ-003: 打刻履歴の表示
**優先度**: 中
**説明**: 従業員が自分の打刻履歴を確認できる。
**詳細要件**:
- 月次・週次・日次での表示切り替えが可能
- 打刻時刻、場所、勤務時間が表示される
- 過去6ヶ月分の履歴が閲覧可能

#### REQ-004: 打刻修正申請
**優先度**: 中
**説明**: 打刻忘れや誤打刻の修正を申請できる。
**詳細要件**:
- 修正理由の入力が必須
- 管理者の承認が必要
- 承認/却下の通知を受け取る

---

### 3.2 残業申請機能

#### REQ-005: 事前残業申請
**優先度**: 高
**説明**: 従業員が事前に残業を申請できる。
**詳細要件**:
- 申請日、予定残業時間、理由を入力
- 申請は勤務日の前日23:59までに提出
- 承認者（直属の上司）に通知が送信される
- 申請状態（申請中/承認済/却下）が確認できる

#### REQ-006: 当日残業申請
**優先度**: 高
**説明**: 緊急時には当日に残業を申請できる。
**詳細要件**:
- 当日の18:00以降でも申請可能
- 「緊急」フラグが自動的に付与される
- 事前申請と同様の承認フローを経る
- 事後承認も可能（退勤打刻後24時間以内）

#### REQ-007: 残業申請の承認/却下
**優先度**: 高
**説明**: 管理者が残業申請を承認または却下できる。
**詳細要件**:
- 申請一覧から個別に承認/却下を選択
- 却下時はコメント入力が必須
- 承認/却下時に申請者へ通知

---

### 3.3 残業時間管理

#### REQ-008: 月次残業時間の自動集計
**優先度**: 高
**説明**: システムが自動的に月次の残業時間を集計する。
**詳細要件**:
- 承認済み残業時間のみを集計対象とする
- 集計は毎日深夜0時に更新される
- 残業時間が40時間を超えた場合、警告を表示

#### REQ-009: 45時間超過時の人事部承認
**優先度**: 高
**説明**: 月の残業時間が45時間を超える場合、人事部の承認が必要。
**詳細要件**:
- 45時間を超える時点で自動的に人事部へ通知
- 人事部が承認するまで45時間超過分の残業は確定しない
- 承認/却下の理由を記録する
- 36協定の特別条項に基づく承認フローとして扱う

#### REQ-010: 残業時間の上限アラート
**優先度**: 中
**説明**: 法定上限に近づいた場合、警告を表示する。
**詳細要件**:
- 月80時間、年720時間の上限を監視
- 上限の80%到達時に従業員と管理者に警告
- 上限超過の申請は自動的に却下される

---

### 3.4 管理者機能

#### REQ-011: 部下の勤怠状況確認
**優先度**: 高
**説明**: 管理者が部下の勤怠状況を確認できる。
**詳細要件**:
- 組織階層に基づき、直属の部下のみ閲覧可能
- 月次・週次・日次での集計表示
- 打刻状況、残業時間、申請状況を一覧表示
- CSVエクスポート機能

#### REQ-012: 勤怠異常の検知
**優先度**: 中
**説明**: 管理者に勤怠異常を通知する。
**詳細要件**:
- 打刻忘れ、過度な残業、深夜労働を検知
- ダッシュボードに異常件数を表示
- 週次レポートをメールで送信

#### REQ-013: 承認業務の一括処理
**優先度**: 中
**説明**: 複数の申請を一括で承認/却下できる。
**詳細要件**:
- チェックボックスで複数選択
- 一括承認時は確認ダイアログを表示
- 処理結果をログに記録

---

### 3.5 データ管理

#### REQ-014: 勤怠データの5年間保持
**優先度**: 高
**説明**: 過去の勤怠データを5年間保持する。
**詳細要件**:
- 全ての打刻記録、申請記録、承認記録を保持
- データは改ざん防止のため、確定後は編集不可
- 5年経過後は自動的にアーカイブストレージに移行
- 法的要求に基づき、必要時は復元可能

#### REQ-015: データのバックアップ
**優先度**: 高
**説明**: 勤怠データの定期バックアップを実施する。
**詳細要件**:
- 日次で自動バックアップを実行
- バックアップデータは別拠点に保管
- 月次でバックアップの整合性を検証

#### REQ-016: 監査ログの記録
**優先度**: 中
**説明**: 全ての操作を監査ログに記録する。
**詳細要件**:
- ユーザー操作、承認操作、データ修正を記録
- タイムスタンプ、ユーザーID、操作内容、IPアドレスを保存
- ログは5年間保持

---

## 4. 非機能要件

### 4.1 性能要件

#### REQ-017: レスポンス時間
**説明**: 通常操作のレスポンス時間は3秒以内とする。
**詳細**:
- 打刻操作：1秒以内
- 画面遷移：2秒以内
- レポート生成：5秒以内（大量データの場合）

#### REQ-018: 同時アクセス
**説明**: 最大1,000ユーザーの同時アクセスに対応する。
**詳細**:
- 出勤時間帯（8:00-9:30）のピーク時を想定
- システムダウンなく処理できること

---

### 4.2 セキュリティ要件

#### REQ-019: 認証・認可
**説明**: 適切な認証と認可を実施する。
**詳細**:
- 社内シングルサインオン（SSO）と連携
- ロールベースアクセス制御（RBAC）を実装
- セッションタイムアウト：30分

#### REQ-020: 通信の暗号化
**説明**: 全ての通信をHTTPS/TLSで暗号化する。

#### REQ-021: 個人情報保護
**説明**: 個人情報保護法に準拠したデータ管理を行う。
**詳細**:
- 位置情報は匿名化して保管
- アクセスログに基づく不正アクセス監視

---

### 4.3 可用性要件

#### REQ-022: システム稼働率
**説明**: 稼働率99.5%以上を維持する。
**詳細**:
- 計画メンテナンス時間を除く
- メンテナンスは月1回、深夜時間帯に実施

#### REQ-023: 障害復旧
**説明**: 障害発生時は2時間以内に復旧する。
**詳細**:
- 自動フェイルオーバー機能を実装
- 復旧手順書を整備

---

### 4.4 ユーザビリティ要件

#### REQ-024: モバイル対応
**説明**: スマートフォンで快適に操作できるUIを提供する。
**詳細**:
- レスポンシブデザイン
- iOS/Android両対応
- 画面サイズ：4.7インチ以上を推奨

#### REQ-025: アクセシビリティ
**説明**: WCAG 2.1 レベルAAに準拠する。

---

## 5. システム制約

### 5.1 技術制約
- 既存の社内認証システムとの連携が必須
- 社内ネットワークからのアクセスを基本とするが、VPN経由での外部アクセスも許可

### 5.2 運用制約
- 月末月初の勤怠確定処理は手動確認が必要
- 5年間のデータ保持は労働基準法第109条に基づく

### 5.3 法規制
- 労働基準法
- 労働安全衛生法
- 個人情報保護法

---

## 6. 用語集

| 用語 | 定義 |
|---|---|
| 打刻 | 出勤・退勤時刻を記録する行為 |
| 残業 | 所定労働時間（9:00-18:00）を超える労働 |
| 36協定 | 労働基準法第36条に基づく時間外労働に関する協定 |
| 管理者 | 部下の勤怠管理を行う上司（課長、部長等） |
| 人事部 | 全社的な勤怠管理と労務管理を担当する部門 |

---

## 7. 変更履歴

| 版 | 日付 | 変更内容 | 作成者 |
|---|---|---|---|
| 1.0 | 2025-12-15 | 初版作成 | - |

---

## 8. 補足事項

### 8.1 今後の検討事項
- 有給休暇管理機能との連携
- 勤務パターンの柔軟な設定（フレックスタイム、シフト制）
- スマートウォッチ等のウェアラブルデバイス対応
- AI による勤怠異常検知の高度化

### 8.2 参考資料
- 労働基準法
- 36協定ガイドライン
- 個人情報保護法ガイドライン
